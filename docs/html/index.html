

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>gce: GPU-Accelerated Condtional Entropy &mdash; gce  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> gce
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">gce: GPU-Accelerated Condtional Entropy</a><ul>
<li><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#installing">Installing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-the-tests">Running the tests</a></li>
<li><a class="reference internal" href="#contributing">Contributing</a></li>
<li><a class="reference internal" href="#versioning">Versioning</a></li>
<li><a class="reference internal" href="#authors">Authors</a><ul>
<li><a class="reference internal" href="#contibutors">Contibutors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#license">License</a></li>
<li><a class="reference internal" href="#acknowledgments">Acknowledgments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-gcex.gce">Documentation</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">gce</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>gce: GPU-Accelerated Condtional Entropy</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="gce-gpu-accelerated-condtional-entropy">
<h1>gce: GPU-Accelerated Condtional Entropy<a class="headerlink" href="#gce-gpu-accelerated-condtional-entropy" title="Permalink to this headline">¶</a></h1>
<p>gce implements the Conditional Entropy (CE, <a class="reference external" href="https://arxiv.org/abs/1306.6664">arXiv:1306.6664</a>) search technique for periodic objects in electromagnetic surveys. This implementation is specifically for use with graphics processing units (GPU). The user inputs light curves as well as grid parameters used for each CE calculation. Basic statistics are calculated for these CE grids, which are then used to assign a significance to the minimum CE value. The minimum CE value indicates the most likely set of parameters. Documentation for this package can be found <a class="reference external" href="https://mikekatz04.github.io/gce/">here</a>.</p>
<p>If you use all or any parts of this code, please cite (TODO: add arXiv) and the original Conditional Entropy paper (<a class="reference external" href="https://arxiv.org/abs/1306.6664">arXiv:1306.6664</a>).</p>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple" start="0">
<li><p><a class="reference external" href="https://docs.anaconda.com/anaconda/install/">Install Anaconda</a> if you do not have it.</p></li>
<li><p>Create a virtual environment.</p></li>
</ol>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>conda create -n gce_env numpy Cython
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Use pip to <a class="reference external" href="https://docs-cupy.chainer.org/en/stable/install.html">install cupy</a>. If you have cuda version 9.2, for example:</p></li>
</ol>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>pip install cupy-cuda92
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Clone the repository.</p></li>
</ol>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/mikekatz04/gce.git
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Run install. Make sure CUDA is on your PATH.</p></li>
</ol>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>python setup.py install
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>To import gce:</p></li>
</ol>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>from gcex.gce import ConditionalEntropy
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Perform test:</p></li>
</ol>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>TODOs
</pre></div>
</div>
<div class="section" id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<p>To install this software, you need the <a class="reference external" href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html">CUDA toolkit</a>, Python &gt;3.4, numpy, and <a class="reference external" href="https://cupy.chainer.org/">cupy</a>. The CUDA toolkit must have cuda version &gt;8.0. To run this software you need an NVIDIA GPU of compute capability &gt;2.0.</p>
</div>
<div class="section" id="installing">
<h3>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Clone the repository.</p></li>
</ol>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/mikekatz04/gce.git
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Run install. Make sure CUDA is on your PATH.</p></li>
</ol>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>python setup.py install
</pre></div>
</div>
</div>
</div>
<div class="section" id="running-the-tests">
<h2>Running the tests<a class="headerlink" href="#running-the-tests" title="Permalink to this headline">¶</a></h2>
<p>TODO</p>
</div>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<p>Please read <a class="reference external" href="CONTRIBUTING.md">CONTRIBUTING.md</a> for details on our code of conduct, and the process for submitting pull requests to us.</p>
</div>
<div class="section" id="versioning">
<h2>Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h2>
<p>We use <a class="reference external" href="http://semver.org/">SemVer</a> for versioning. For the versions available, see the <a class="reference external" href="https://github.com/mikekatz04/gce/tags">tags on this repository</a>.</p>
<p>Current Version: 0.1.0</p>
</div>
<div class="section" id="authors">
<h2>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Michael Katz</strong></p></li>
</ul>
<div class="section" id="contibutors">
<h3>Contibutors<a class="headerlink" href="#contibutors" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Michael Coughlin</p></li>
<li><p>Olivia Cooper</p></li>
<li><p>Kevin Burdge</p></li>
</ul>
</div>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>This project is licensed under the GNU License - see the <a class="reference external" href="LICENSE.md">LICENSE.md</a> file for details.</p>
</div>
<div class="section" id="acknowledgments">
<h2>Acknowledgments<a class="headerlink" href="#acknowledgments" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Katie Breivik</p></li>
<li><p>Shane Larson</p></li>
<li><p>This research resulting in this code was supported by National Science Foundation under grant DGE-0948017 and the Chateaubriand Fellowship from the Office for Science &amp; Technology of the Embassy of France in the United States.</p></li>
<li><p>It was also supported in part through the computational resources and staff contributions provided for the Quest/Grail high performance computing facility at Northwestern University.</p></li>
</ul>
</div>
</div>
<div class="section" id="module-gcex.gce">
<span id="documentation"></span><h1>Documentation<a class="headerlink" href="#module-gcex.gce" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="gcex.gce.ConditionalEntropy">
<em class="property">class </em><code class="sig-prename descclassname">gcex.gce.</code><code class="sig-name descname">ConditionalEntropy</code><span class="sig-paren">(</span><em class="sig-param">phase_bins=30</em>, <em class="sig-param">mag_bins=10</em>, <em class="sig-param">long_limit=2000</em>, <em class="sig-param">use_long=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#gcex.gce.ConditionalEntropy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Calculate the Conditional Entropy</p>
<p>This class computes the conditional entropy for a list of light curves
along pdot and frequency axes determined by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phase_bins</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of phase bins. Default is 30.</p></li>
<li><p><strong>mag_bins</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of magnitude bins. Default is 10.</p></li>
<li><p><strong>long_limit</strong> (<em>int</em><em>, </em><em>optional</em>) – Length of a light curve where the code
forces the use of the longer light curve version of gce.
Default is 2,000.</p></li>
<li><p><strong>use_long</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, use the long gce version of the
code. Default is False.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="gcex.gce.ConditionalEntropy.phase_bins">
<code class="sig-name descname">phase_bins</code><a class="headerlink" href="#gcex.gce.ConditionalEntropy.phase_bins" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of phase bins.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gcex.gce.ConditionalEntropy.mag_bins">
<code class="sig-name descname">mag_bins</code><a class="headerlink" href="#gcex.gce.ConditionalEntropy.mag_bins" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of magnitude bins.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gcex.gce.ConditionalEntropy.half_dbins">
<code class="sig-name descname">half_dbins</code><a class="headerlink" href="#gcex.gce.ConditionalEntropy.half_dbins" title="Permalink to this definition">¶</a></dt>
<dd><p>Half of the phase bin width.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>double</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gcex.gce.ConditionalEntropy.ce">
<code class="sig-name descname">ce</code><a class="headerlink" href="#gcex.gce.ConditionalEntropy.ce" title="Permalink to this definition">¶</a></dt>
<dd><p>Numpy ndarray of conditional entropy values. Shape is
(light curves, pdots, frequencyies).</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gcex.gce.ConditionalEntropy.min_ce">
<code class="sig-name descname">min_ce</code><a class="headerlink" href="#gcex.gce.ConditionalEntropy.min_ce" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimum conditional entropy value.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>double</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gcex.gce.ConditionalEntropy.mean_ce">
<code class="sig-name descname">mean_ce</code><a class="headerlink" href="#gcex.gce.ConditionalEntropy.mean_ce" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean of the conditional entropy values.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>double</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gcex.gce.ConditionalEntropy.std_ce">
<code class="sig-name descname">std_ce</code><a class="headerlink" href="#gcex.gce.ConditionalEntropy.std_ce" title="Permalink to this definition">¶</a></dt>
<dd><p>Standard deviation of the conditional entropy values.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>double</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gcex.gce.ConditionalEntropy.significance">
<code class="sig-name descname">significance</code><a class="headerlink" href="#gcex.gce.ConditionalEntropy.significance" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the significance of the observations.
The formula we use for the significance is (mean - min)/std.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>double</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gcex.gce.ConditionalEntropy.best_params">
<code class="sig-name descname">best_params</code><a class="headerlink" href="#gcex.gce.ConditionalEntropy.best_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Best parameters determined by the minimum
conditional entropy. The tuple will contain lists of the best
parameters, which may be more than one configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>tuple of lists</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gcex.gce.ConditionalEntropy.batched_run_const_nfreq">
<code class="sig-name descname">batched_run_const_nfreq</code><span class="sig-paren">(</span><em class="sig-param">lightcurves</em>, <em class="sig-param">batch_size</em>, <em class="sig-param">freqs</em>, <em class="sig-param">pdots=None</em>, <em class="sig-param">pdot_batch_size=None</em>, <em class="sig-param">return_type='all'</em>, <em class="sig-param">show_progress=False</em>, <em class="sig-param">pickle_out=[]</em>, <em class="sig-param">pickle_string='ce_out'</em>, <em class="sig-param">true_vals=None</em>, <em class="sig-param">convert_f_to_p=False</em><span class="sig-paren">)</span><a class="headerlink" href="#gcex.gce.ConditionalEntropy.batched_run_const_nfreq" title="Permalink to this definition">¶</a></dt>
<dd><p>Run gce on lights curves.</p>
<p>This method actually performs the gce calculation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lightcurves</strong> (<em>list of numpy ndarrays</em>) – Light curves to be analyzed
given as a list of numpy arrays containing the light curve
information. The light curve arrays have shape
(2, light curve length), where 2 is the time and magnitdue.</p></li>
<li><p><strong>batch_size</strong> (<em>int</em>) – <p>Max number of light curves to run through gce for each
computation. Usually, the larger the number, the faster the
algorithm will perform, but with diminishing returns. However,
there is an upper limit due to memory on the GPU.</p>
<p>Choice here affects the memory usage on the GPU and splits up
the calculation as needed to stay within memory limits.</p>
</p></li>
<li><p><strong>freqs</strong> (<em>1D array</em>) – Array with the frequencies to be tested.</p></li>
<li><p><strong>pdots</strong> (<em>1D array</em><em>, </em><em>optional</em>) – Array with pdots to be tested. Default
is <cite>None</cite> indicating a test with 0.0 for the pdot.</p></li>
<li><p><strong>pdot_batch_size</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of pdots to run for each computation.
Choice here affects the memory usage on the GPU and splits up
the calculation as needed to stay within memory limits. When
len(pdots) &gt; pdot_batch_size, the calculations are run
separately and then combined, including statistics of the
conditional entropy values. Defaults to <cite>None</cite>, which means gce
will use the length of the pdot array as the <cite>pdot_batch_size</cite>.</p></li>
<li><p><strong>return_type</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>User chosen return type.</p>
<dl>
<dt>Options:</dt><dd><dl class="simple">
<dt><cite>all</cite>: Returned conditional entropy values for every grid</dt><dd><p>point.</p>
</dd>
</dl>
<p><cite>best</cite>: Return best conditional entropy value.
<cite>best_params</cite>: Return best frequency and pdot values.</p>
</dd>
</dl>
</p></li>
<li><p><strong>show_progress</strong> (<em>bool</em><em>, </em><em>optional</em>) – Shows progress of batch calculations
using tqdm. Default is False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Return all conditional entropy values, the best conditional</dt><dd><p>entropy values, or the best parameters for each light curve.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array or lists of arrays</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – <cite>return_type</cite> is set to a value that is not in the
    options list.</p></li>
<li><p><strong>ValueError</strong> – <cite>pdot_batch_size</cite> is less than one.</p></li>
<li><p><strong>ValueError</strong> – Key in <cite>pickle_out</cite> is not available.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Michael L. Katz

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>